<!DOCTYPE html>
<html lang=en>
<head>
    <meta charset="utf-8">
    
    <title>FlatMap | Mahan&#39;s Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="One of the most crucial and important concepts in mastering reactive extensions is understanding flatMap() and the uses of it which is mainly due to the fact that even a fairly simple application tend">
<meta property="og:type" content="article">
<meta property="og:title" content="FlatMap">
<meta property="og:url" content="http://truelogician.com/2015/flatmap/index.html">
<meta property="og:site_name" content="Mahan's Blog">
<meta property="og:description" content="One of the most crucial and important concepts in mastering reactive extensions is understanding flatMap() and the uses of it which is mainly due to the fact that even a fairly simple application tend">
<meta property="og:image" content="http://truelogician.com/images/rx/thumb-flatmap.png">
<meta property="og:updated_time" content="2017-03-16T20:45:16.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="FlatMap">
<meta name="twitter:description" content="One of the most crucial and important concepts in mastering reactive extensions is understanding flatMap() and the uses of it which is mainly due to the fact that even a fairly simple application tend">
<meta name="twitter:image" content="http://truelogician.com/images/rx/thumb-flatmap.png">
    

    
        <link rel="alternate" href="atom.xml" title="Mahan&#39;s Blog" type="application/atom+xml" />
    

    
        <link rel="icon" href="/css/images/logo.png" />
    

    <link rel="stylesheet" href="/vendor/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/vendor/open-sans/styles.css">
    <link rel="stylesheet" href="/vendor/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/vendor/jquery/2.1.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/vendor/lightgallery/css/lightgallery.min.css">
    
    
        <script type="text/javascript">
(function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-83022248-1', 'auto');
ga('send', 'pageview');

</script>
    
    
    

</head>

<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">Mahan&#39;s Blog</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/.">Home</a>
                
                    <a class="main-nav-link" href="/archives">Archives</a>
                
                    <a class="main-nav-link" href="/categories">Categories</a>
                
                    <a class="main-nav-link" href="/tags">Tags</a>
                
                    <a class="main-nav-link" href="/about">About</a>
                
            </nav>
            
                
                <nav id="sub-nav">
                    <div class="profile" id="profile-nav">
                        <a id="profile-anchor" href="javascript:;">
                            <img class="avatar" src="/css/images/avatar.png" />
                            <i class="fa fa-caret-down"></i>
                        </a>
                    </div>
                </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/.">Home</a></td>
                
                    <td><a class="main-nav-link" href="/archives">Archives</a></td>
                
                    <td><a class="main-nav-link" href="/categories">Categories</a></td>
                
                    <td><a class="main-nav-link" href="/tags">Tags</a></td>
                
                    <td><a class="main-nav-link" href="/about">About</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
                

<aside id="profile">
    <div class="inner profile-inner">
        <div class="base-info profile-block">
            <img id="avatar" src="/css/images/avatar.png" />
            <h2 id="name">Mahan Rad</h2>
            <h3 id="title">Senior Software Engineer</h3>
            <span id="location"><i class="fa fa-map-marker"></i>Sweden</span>
            <a id="follow" target="_blank" href="https://github.com/mahorad/">FOLLOW</a>
        </div>
        <div class="article-info profile-block">
            <div class="article-info-block">
                35
                <span>posts</span>
            </div>
            <div class="article-info-block">
                31
                <span>tags</span>
            </div>
        </div>
        
        <div class="profile-block social-links">
            <table>
                <tr>
                    
                    
                    <td>
                        <a href="https://github.com/mahorad" target="_blank" title="github" class=tooltip>
                            <i class="fa fa-github"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="https://www.linkedin.com/in/mahorad" target="_blank" title="linkedin" class=tooltip>
                            <i class="fa fa-linkedin"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="https://plus.google.com/+MahanRad" target="_blank" title="google-plus" class=tooltip>
                            <i class="fa fa-google-plus"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="https://twitter.com/mahan_h" target="_blank" title="twitter" class=tooltip>
                            <i class="fa fa-twitter"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="https://soundcloud.com/mahorad" target="_blank" title="soundcloud" class=tooltip>
                            <i class="fa fa-soundcloud"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/atom.xml" target="_blank" title="rss" class=tooltip>
                            <i class="fa fa-rss"></i>
                        </a>
                    </td>
                    
                </tr>
            </table>
        </div>
        <div class="base-info profile-block">
            <h2 id="name">About</h2>
            <h3 align="justify">Mahan is a senior software engineer, a tech. enthusiast, an <a href="https://goo.gl/ScgBXS">Oracle certified professional</a>, a Java dev. veteran and software consultant at <a href="http://combitech.com">Combitech.</a></h3>
            <h3 align="center"><br/><img src="/css/images/oracle.png" /></h3></h3>
        </div>
        
    </div>
</aside>

            
            <section id="main"><article id="post-2015/flatmap" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
            
	
		<img src="/images/rx/header-flatmap.png" class="article-banner" />
	



        
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
            FlatMap
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2015/flatmap/">
            <time datetime="2015-04-26T19:46:12.000Z" itemprop="datePublished">2015-04-26</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/Reactive/">Reactive</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Reactive-Extensions/">Reactive Extensions</a>, <a class="tag-link" href="/tags/Reactive-Programming/">Reactive Programming</a>, <a class="tag-link" href="/tags/RxJava/">RxJava</a>, <a class="tag-link" href="/tags/Tutorials/">Tutorials</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p><div align="justify"><br>One of the most crucial and important concepts in mastering reactive extensions is understanding flatMap() and the uses of it which is mainly due to the fact that even a fairly simple application tend to work with multiple observables.<br></div><br><a id="more"></a><br>However, before understanding flatMap, we need to learn its simpler version, the map() operator and the details around using it.</p>
<h3 id="map-Transformation-On-the-fly"><a href="#map-Transformation-On-the-fly" class="headerlink" title="map(), Transformation On-the-fly"></a>map(), Transformation On-the-fly</h3><p>Sometimes you want to perform a transformation on each and every event from the upstream as soon as they arrive and pack them into a new observable for the downstream subscribers. In other words, map() constructs Observable<r> and replaces all upstream values of type T with R using your desired mapping function.</r></p>
<p>The snippet below takes integer values and maps items to corresponding strings embellished with double quotes.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Observable&lt;Integer&gt; observable =</div><div class="line">  Observable.just(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</div><div class="line">Observable&lt;String&gt; map1 =</div><div class="line">  observable.map(n -&gt; <span class="string">"\""</span> + n + <span class="string">"\""</span>);</div><div class="line">map1.subscribe(log::info);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[main] - &quot;1&quot;</div><div class="line">[main] - &quot;2&quot;</div><div class="line">[main] - &quot;3&quot;</div></pre></td></tr></table></figure>
<p>We could also use multiple map() operators together.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Observable&lt;Instant&gt; map = observable</div><div class="line">  .map(order -&gt; order.getUser())</div><div class="line">  .map(user -&gt; user.birthDate())</div><div class="line">  .map(Date::toInstant);</div></pre></td></tr></table></figure>
<p>So far, each event within the upstream was a simple object, but what if the computation used for mapping is asynchronous or already return observables?</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">Observable&lt;Integer&gt; observable =</div><div class="line">  Observable.just(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</div><div class="line"></div><div class="line">Observable&lt;Observable&lt;Integer&gt;&gt; map =</div><div class="line">  observable.map(integer -&gt;</div><div class="line">    Observable.timer(<span class="number">1</span>, SECONDS)</div><div class="line">              .map(s -&gt; integer)</div><div class="line">  );</div><div class="line"></div><div class="line">map.subscribe(log::info);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[main] - rx.Observable@36f6e879</div><div class="line">[main] - rx.Observable@5a61f5df</div><div class="line">[main] - rx.Observable@3551a94</div></pre></td></tr></table></figure>
<h3 id="Using-flatMap"><a href="#Using-flatMap" class="headerlink" title="Using flatMap()"></a>Using flatMap()</h3><p>Since working with nested observables are cumbersome as you need to subscribe to each inner Observable and synchronize the results back into a single stream, flatMap() was created.</p>
<p>flatMap() does the following in order:</p>
<ul>
<li>constructs Observable<observable<r>&gt; (an observable of observables)</observable<r></li>
<li>replaces all upstream values of type T with Observable<r> (just like map()).</r></li>
<li>then it automatically subscribes to these inner Observable<r> streams</r></li>
<li>produces a single stream of type R, containing all values from all inner streams, as they come.</li>
<li>note that events produced from one inner Observable can interleave with events from another.</li>
</ul>
<p>The use cases of flatMap() mainly fall into the following categories; however check out its other overloads to find more usages.</p>
<h4 id="Asynchronous-Lengthy-Operations"><a href="#Asynchronous-Lengthy-Operations" class="headerlink" title="Asynchronous Lengthy Operations"></a>Asynchronous Lengthy Operations</h4><p>When the result of map() conversion is an Observable or a lengthy asynchronous operation that occurs on each element of the upstream. Examples of such operations are nonblocking IO operations.</p>
<p>The following example demonstrates a stream of webpages objects that only contain valid URLs that are to be fetched and parsed respectively.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">return</span> webPages</div><div class="line">  .flatMap(<span class="keyword">this</span>::fetchAsync)</div><div class="line">  .flatMap(<span class="keyword">this</span>::parseAsync);</div><div class="line"></div><div class="line"><span class="function">Observable&lt;Page&gt; <span class="title">fetchAsync</span><span class="params">(Page webPage)</span> </span>&#123;</div><div class="line">  <span class="comment">/* fetches page's document */</span></div><div class="line">&#125;</div><div class="line"><span class="function">Observable&lt;Page&gt; <span class="title">parseAsync</span><span class="params">(Page webPage)</span> </span>&#123;</div><div class="line">  <span class="comment">/* parses page's content */</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>or a lengthy operation such as recognizing people from their photos.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">Observable&lt;Image&gt; photos = getPhotos();</div><div class="line">Observable&lt;String&gt; names =</div><div class="line">  photos.flatMap(<span class="keyword">this</span>::recognize);</div><div class="line"></div><div class="line"><span class="function">Observable&lt;String&gt; <span class="title">recognize</span><span class="params">(Image photo)</span> </span>&#123;</div><div class="line">  <span class="comment">/* recognizes name by photo */</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="One-to-Many-Transformation"><a href="#One-to-Many-Transformation" class="headerlink" title="One-to-Many Transformation:"></a>One-to-Many Transformation:</h4><p>That is when a single event is mapped into multiple sub-events; like a stream of orders where each order could contain multiple products that can be mapped to.</p>
<p>Consider the following API and imagine that we need to create a stream of items (products) being purchased in order to run some statistical calculations and find the popular products.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">OnlinePurchase</span> </span>&#123;</div><div class="line">  <span class="comment">//...</span></div><div class="line">  <span class="function">Observable&lt;Order&gt; <span class="title">getOrders</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="comment">/* an observable of orders made so far */</span></div><div class="line">  &#125;</div><div class="line">  <span class="comment">//...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Order</span> </span>&#123;</div><div class="line">  <span class="comment">//...</span></div><div class="line">  <span class="function">List&lt;Product&gt; <span class="title">getProducts</span><span class="params">()</span> </span>&#123;<span class="comment">/*...*/</span>&#125;</div><div class="line">  <span class="comment">//...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Notice the Customer class that has simple getter method <strong>List<product> getProducts()</product></strong> returning an Iterable, now let’s see what we need to go through to create such a pipeline:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<p>Now let’s see how this can be implemented using flatMap() or its counterpart flatMapIterable().</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">Observable&lt;Product&gt; items =</div><div class="line">  getOrders()</div><div class="line">    .map(order -&gt; order.getProducts())</div><div class="line">    .flatMap(Observable::from);</div><div class="line"></div><div class="line"><span class="comment">/* which is equivalen to */</span></div><div class="line">Observable&lt;Product&gt; items =</div><div class="line">  getOrders()</div><div class="line">    .flatMapIterable(order -&gt; order.getProducts());</div></pre></td></tr></table></figure>
<h5 id="Using-Instead-of-subscribe"><a href="#Using-Instead-of-subscribe" class="headerlink" title="Using Instead of subscribe()"></a>Using Instead of subscribe()</h5><p>imagine that we can upload a video (while we get notified of how much of it is uploaded) and we need to rate it right after upload is done.<br>consider the following replacement with flatMap()</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">store</span><span class="params">(UUID id)</span> </span>&#123;</div><div class="line">  upload(id).subscribe(</div><div class="line">    bytes -&gt; &#123;&#125;, <span class="comment">//ignore</span></div><div class="line">    e -&gt; log.error(<span class="string">"Error"</span>, e),</div><div class="line">    () -&gt; rate(id)</div><div class="line">  );</div><div class="line">&#125;</div><div class="line"><span class="function">Observable&lt;Long&gt; <span class="title">upload</span><span class="params">(UUID id)</span> </span>&#123;</div><div class="line">  <span class="comment">//...</span></div><div class="line">&#125;</div><div class="line"><span class="function">Observable&lt;Rating&gt; <span class="title">rate</span><span class="params">(UUID id)</span> </span>&#123;</div><div class="line">  <span class="comment">//...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>we could replace the content of store(..) method with the following using the flatMap()</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">upload(id)</div><div class="line">  .flatMap(</div><div class="line">    bytes -&gt; Observable.empty(),</div><div class="line">    e -&gt; Observable.error(e),</div><div class="line">    () -&gt; rate(id)</div><div class="line">  );</div></pre></td></tr></table></figure>
<p>we replace the completion notification with another Observable<rating> (i.e. rate(id)). So, even if the<br>original Observable wanted to terminate, we ignore that and in a way append a different<br>Observable.</rating></p>
<p>Remember that in practice, we do not replace map() and filter() with flatMap() due to the clarity<br>of code and performance.</p>
<p>the following is another example of flatMap()</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="function">Observable&lt;Sound&gt; <span class="title">toMorseCode</span><span class="params">(<span class="keyword">char</span> ch)</span> </span>&#123;</div><div class="line">  <span class="keyword">switch</span>(ch) &#123;</div><div class="line">    <span class="keyword">case</span> <span class="string">'a'</span>: <span class="keyword">return</span> just(DI, DAH);</div><div class="line">    <span class="keyword">case</span> <span class="string">'b'</span>: <span class="keyword">return</span> just(DAH, DI, DI, DI);</div><div class="line">    <span class="keyword">case</span> <span class="string">'c'</span>: <span class="keyword">return</span> just(DAH, DI, DAH, DI);</div><div class="line">    <span class="comment">//...</span></div><div class="line">    <span class="keyword">case</span> <span class="string">'p'</span>: <span class="keyword">return</span> just(DI, DAH, DAH, DI);</div><div class="line">    <span class="keyword">case</span> <span class="string">'r'</span>: <span class="keyword">return</span> just(DI, DAH, DI);</div><div class="line">    <span class="keyword">case</span> <span class="string">'s'</span>: <span class="keyword">return</span> just(DI, DI, DI);</div><div class="line">    <span class="keyword">case</span> <span class="string">'t'</span>: <span class="keyword">return</span> just(DAH);</div><div class="line">    <span class="comment">//...</span></div><div class="line">    <span class="keyword">default</span>:</div><div class="line">    <span class="keyword">return</span> empty();</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">enum</span> Sound &#123; DI, DAH &#125;</div><div class="line"><span class="comment">//...</span></div><div class="line">just(<span class="string">'S'</span>, <span class="string">'p'</span>, <span class="string">'a'</span>, <span class="string">'r'</span>, <span class="string">'t'</span>, <span class="string">'a'</span>)</div><div class="line">  .map(Character::toLowerCase)</div><div class="line">  .flatMap(<span class="keyword">this</span>::toMorseCode);</div></pre></td></tr></table></figure>
<p><strong>Note</strong>: flatMap() does not preserve the original order of events. In other words,<br>flatMap() cannot give any guarantee about what order of sub-events will arrive at the downstream operator/subscriber.<br>In fact, flatMap() subscribes to all sub-streams immediately and merges them together, pushing events downstream whenever any of the inner streams emit anything.</p>
<h3 id="Order-of-Events-After-flatMap"><a href="#Order-of-Events-After-flatMap" class="headerlink" title="Order of Events After flatMap()"></a>Order of Events After flatMap()</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">Observable</div><div class="line">  .just(DayOfWeek.SUNDAY, DayOfWeek.MONDAY)</div><div class="line">  .flatMap(<span class="keyword">this</span>::loadRecordsFor);</div><div class="line"></div><div class="line"><span class="function">Observable&lt;String&gt; <span class="title">loadRecordsFor</span><span class="params">(DayOfWeek dow)</span> </span>&#123;</div><div class="line">  <span class="keyword">switch</span>(dow) &#123;</div><div class="line">    <span class="keyword">case</span> SUNDAY:</div><div class="line">      <span class="keyword">return</span> Observable</div><div class="line">        .interval(<span class="number">90</span>, MILLISECONDS)</div><div class="line">        .take(<span class="number">5</span>)</div><div class="line">        .map(i -&gt; <span class="string">"Sun-"</span> + i);</div><div class="line">    <span class="keyword">case</span> MONDAY:</div><div class="line">      <span class="keyword">return</span> Observable</div><div class="line">        .interval(<span class="number">65</span>, MILLISECONDS)</div><div class="line">        .take(<span class="number">5</span>)</div><div class="line">        .map(i -&gt; <span class="string">"Mon-"</span> + i);</div><div class="line">        <span class="comment">//...</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>flatMap() instead subscribes to all substreams<br>immediately and merges them together, pushing events downstream whenever<br>any of the inner streams emit anything. All subsequences returned from<br>flatMap() are merged and treated equally; that is, RxJava subscribes to all of them<br>immediately and pushes events downstream evenly:</p>
<p>Sun-0, Sun-1, Sun-2, Sun-3, Sun-4, Mon-0, Mon-1, Mon-2, Mon-3, Mon-4</p>
<h3 id="Controlling-the-concurrency-of-flatMap"><a href="#Controlling-the-concurrency-of-flatMap" class="headerlink" title="Controlling the concurrency of flatMap()"></a>Controlling the concurrency of flatMap()</h3><p>Consider the following example where we load user profiles through HTTP requests.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</div><div class="line">  <span class="function">Observable&lt;Profile&gt; <span class="title">loadProfile</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="comment">//Make HTTP request...</span></div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Profile</span> </span>&#123;<span class="comment">/* ... */</span>&#125;</div><div class="line"><span class="comment">//...</span></div><div class="line"></div><div class="line"></div><div class="line">List&lt;User&gt; veryLargeList = <span class="comment">//...</span></div><div class="line">Observable&lt;Profile&gt; profiles = Observable</div><div class="line">  .from(veryLargeList)</div><div class="line">  .flatMap(User::loadProfile);</div></pre></td></tr></table></figure>
<p>this might look great at first glance since it emits all users pretty much instantaneously. However, subscription to<br>inner Observable<profile> most likely makes a new HTTP connection for each user. Therefore,<br>if we have, say 10,000 Users, we suddenly triggered 10,000 concurrent HTTP connections hitting the same server and we might end up with:</profile></p>
<ul>
<li>Rejected connections</li>
<li>Long wait time and timeouts</li>
<li>Crashing the server</li>
<li>Hitting rate-limit or blacklisting</li>
<li>Overall latency increase</li>
<li>Issues on the client, including too many open sockets, threads, excessive memory usage</li>
</ul>
<p>Increasing concurrency pays off only up to certain point. If you try to run too many<br>operations concurrently, you will most likely end up with a lot of context switches,<br>high memory and CPU utilization, and overall performance degradation.</p>
<p>flatMap() has a very simple overloaded version that limits the<br>total number of concurrent subscriptions to inner streams:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">flatMap(User::loadProfile, <span class="number">10</span>);</div></pre></td></tr></table></figure>
<p>the maxConcurrent parameter limits the number of background<br>tasks that are forked from flatMap(). As in our case, when the 11th User appears from upstream, flatMap() will<br>not even call loadProfile() but instead, it will wait for any ongoing inner streams to complete.</p>
<p>as can be deduced, concatMap(f) is semantically equivalent to flatMap(f, 1)</p>
<h3 id="Preserving-Order-Using-concatMap"><a href="#Preserving-Order-Using-concatMap" class="headerlink" title="Preserving Order Using concatMap()"></a>Preserving Order Using concatMap()</h3><p>concatMap() operator has the exact same syntax as flatMap() but keeps the order of downstream events so that they align<br>perfectly with upstream events.<br>It does not introduce any concurrency whatsoever but it preserves the order of upstream events, avoiding overlapping.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Observable</div><div class="line">  .just(DayOfWeek.SUNDAY, DayOfWeek.MONDAY)</div><div class="line">  .concatMap(<span class="keyword">this</span>::loadRecordsFor);</div></pre></td></tr></table></figure>
<p>This time the output is exactly what we anticipated:</p>
<p>Sun-0, Sun-1, Sun-2, Sun-3, Sun-4, Mon-0, Mon-1, Mon-2, Mon-3, Mon-4</p>
<h5 id="concatMap-amp-flatMap-Comparison"><a href="#concatMap-amp-flatMap-Comparison" class="headerlink" title="concatMap &amp; flatMap Comparison"></a>concatMap &amp; flatMap Comparison</h5><p>flatMap() subscribes to all sub-Observables at the same time and uses the merge() operator internally<br>concatMap() subscribes only to the first underlying Observable and continues with the second one when the first one completes.</p>
<h3 id="merge-amp-mergeWith"><a href="#merge-amp-mergeWith" class="headerlink" title="merge() &amp; mergeWith()"></a>merge() &amp; mergeWith()</h3><p>merge() operator catches all events and aggregates them into a single stream.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Observable&lt;LicensePlate&gt; all = Observable.merge(</div><div class="line">  preciseAlgo(photo),</div><div class="line">  fastAlgo(photo),</div><div class="line">  experimentalAlgo(photo)</div><div class="line">);</div></pre></td></tr></table></figure>
<p>as soon as someone subscribes to <strong><em>Observable<licenseplate> all</licenseplate></em></strong>, it will automatically subscribe to all<br>upstream Observables at once. No matter which one emits a value first, it will be forwarded<br>to the Observer ensuring that events are serialized<br>(do not overlap), even if underlying streams each emit a value at the same time.</p>
<p>The merge() operator is used extensively when you want to treat multiple sources of<br>events of the same type as a single source.</p>
<p>errors appearing in any of the underlying Observables will be<br>eagerly propagated to Observers.<br>You can use the mergeDelayError() variant of<br>merge() to postpone any errors until all of the other streams have finished. mergeDe<br>layError() will even make sure to collect all exceptions, not only the first one, and<br>encapsulate them in rx.exceptions.CompositeException.</p>
<h3 id="zip-amp-zipWith"><a href="#zip-amp-zipWith" class="headerlink" title="zip() &amp; zipWith()"></a>zip() &amp; zipWith()</h3><p>Zipping is the act of taking two (or more) streams and combining them with each<br>other in such a way that each element from one stream is paired with corresponding<br>event from the other.</p>
<p>Therefore, events appear only<br>when all upstream sources emit an event. This is useful when you want to combine<br>results from multiple streams that are somehow related to one another.<br>Or, quite the<br>contrary, when two independent streams emit values but only combining them<br>together has business meaning.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Observable.zip(s1, s2, s3...);</div><div class="line"></div><div class="line">s1.zipWith(s2, ...);</div></pre></td></tr></table></figure>
<p>example 1:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Weather</span> </span>&#123;</div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="title">Weather</span><span class="params">(Temperature temperature, Wind wind)</span> </span>&#123;</div><div class="line">    <span class="comment">//...</span></div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">//...</span></div><div class="line">Observable&lt;Temperature&gt; temperatureMeasurements = station.temperature();</div><div class="line">Observable&lt;Wind&gt; windMeasurements = station.wind();</div><div class="line">temperatureMeasurements.zipWith(windMeasurements,</div><div class="line">  (temperature, wind) -&gt; <span class="keyword">new</span> Weather(temperature, wind));</div></pre></td></tr></table></figure>
<p>example 2:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">Observable&lt;LocalDate&gt; nextTenDays =</div><div class="line">  Observable</div><div class="line">    .range(<span class="number">1</span>, <span class="number">10</span>)</div><div class="line">    .map(i -&gt; LocalDate.now().plusDays(i));</div><div class="line"></div><div class="line">Observable&lt;Vacation&gt; possibleVacations = Observable</div><div class="line">  .just(City.Warsaw, City.London, City.Paris)</div><div class="line">  .flatMap(city -&gt; nextTenDays.map(date -&gt; <span class="keyword">new</span> Vacation(city, date)))</div><div class="line">  .flatMap(vacation -&gt;</div><div class="line">    Observable.zip(</div><div class="line">      vacation.weather().filter(Weather::isSunny),</div><div class="line">      vacation.cheapFlightFrom(City.NewYork),</div><div class="line">      vacation.cheapHotel(),</div><div class="line">      (w, f, h) -&gt; vacation</div><div class="line">  ));</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Vacation</span> </span>&#123;</div><div class="line">  <span class="keyword">private</span> <span class="keyword">final</span> City where;</div><div class="line">  <span class="keyword">private</span> <span class="keyword">final</span> LocalDate when;</div><div class="line">  Vacation(City where, LocalDate when) &#123;</div><div class="line">    <span class="keyword">this</span>.where = where;</div><div class="line">    <span class="keyword">this</span>.when = when;</div><div class="line">  &#125;</div><div class="line">  <span class="function"><span class="keyword">public</span> Observable&lt;Weather&gt; <span class="title">weather</span><span class="params">()</span> </span>&#123;<span class="comment">/*...*/</span>&#125;</div><div class="line">  <span class="function"><span class="keyword">public</span> Observable&lt;Flight&gt; <span class="title">cheapFlightFrom</span><span class="params">(City from)</span> </span>&#123;<span class="comment">/*...*/</span>&#125;</div><div class="line">  <span class="function"><span class="keyword">public</span> Observable&lt;Hotel&gt; <span class="title">cheapHotel</span><span class="params">()</span> </span>&#123;<span class="comment">/*...*/</span>&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>the line <strong>(w, f, h) -&gt; vacation</strong> basically means that for each vacation, we want to make sure<br>weather, cheap flight, and hotel are present. If all these conditions are met, we return<br>vacation instance; otherwise, zip will not invoke our lambda expression at all.</p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://truelogician.com/2015/flatmap/" data-id="cj0gksf44002a3erom4mylyxb" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="http://truelogician.com/2015/flatmap/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="http://truelogician.com/2015/flatmap/">Comments</a>
    

        </footer>
    </div>
    
        
<nav id="article-nav">
    
        <a href="/2016/hexo-quick-start/" id="article-nav-newer" class="article-nav-link-wrap">
            <strong class="article-nav-caption">Newer</strong>
            <div class="article-nav-title">
                
                    Creating a Blog by Hexo
                
            </div>
        </a>
    
    
        <a href="/2015/observables/" id="article-nav-older" class="article-nav-link-wrap">
            <strong class="article-nav-caption">Older</strong>
            <div class="article-nav-title">Observables &amp; Subscriptions</div>
        </a>
    
</nav>


    
</article>


    
    <section id="comments">
    
        
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>

    
    </section>

</section>
            
                <aside id="sidebar">
   
        
    <div class="widget-wrap">
        <h3 class="widget-title">recent</h3>
        <div class="widget">
            <ul id="recent-post" class="">
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2017/kafka-startup/" class="thumbnail">
    
    
        <span style="background-image:url(/images/kafka/basics-thumb.png)" alt="Getting Started with Kafka" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Kafka/">Kafka</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Kafka/Startup/">Startup</a></p>
                            <p class="item-title"><a href="/2017/kafka-startup/" class="title">Getting Started with Kafka</a></p>
                            <p class="item-date"><time datetime="2017-02-11T21:18:29.000Z" itemprop="datePublished">2017-02-11</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2016/hexo-install-plugins/" class="thumbnail">
    
    
        <span style="background-image:url(/images/hexo/header-plugins.jpg)" alt="Enhance Your Hexo Blog" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Hexo/">Hexo</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Hexo/Plugins/">Plugins</a></p>
                            <p class="item-title"><a href="/2016/hexo-install-plugins/" class="title">Enhance Your Hexo Blog</a></p>
                            <p class="item-date"><time datetime="2016-08-23T20:22:01.000Z" itemprop="datePublished">2016-08-23</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2016/hexo-quick-start/" class="thumbnail">
    
    
        <span style="background-image:url(/images/hexo/header-startup.png)" alt="Creating a Blog by Hexo" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Hexo/">Hexo</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Hexo/Startup/">Startup</a></p>
                            <p class="item-title"><a href="/2016/hexo-quick-start/" class="title">Creating a Blog by Hexo</a></p>
                            <p class="item-date"><time datetime="2016-07-14T19:55:50.000Z" itemprop="datePublished">2016-07-14</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2015/flatmap/" class="thumbnail">
    
    
        <span style="background-image:url(/images/rx/thumb-flatmap.png)" alt="FlatMap" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Reactive/">Reactive</a></p>
                            <p class="item-title"><a href="/2015/flatmap/" class="title">FlatMap</a></p>
                            <p class="item-date"><time datetime="2015-04-26T19:46:12.000Z" itemprop="datePublished">2015-04-26</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2015/observables/" class="thumbnail">
    
    
        <span style="background-image:url(/images/rx/header-observables.png)" alt="Observables &amp; Subscriptions" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Reactive/">Reactive</a></p>
                            <p class="item-title"><a href="/2015/observables/" class="title">Observables &amp; Subscriptions</a></p>
                            <p class="item-date"><time datetime="2015-03-02T21:17:36.000Z" itemprop="datePublished">2015-03-02</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">categories</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Dev-Tools/">Dev. Tools</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Dev-Tools/Git/">Git</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Hexo/">Hexo</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Hexo/Plugins/">Plugins</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Hexo/Startup/">Startup</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kafka/">Kafka</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Kafka/Startup/">Startup</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Object-Oriented-Design/">Object-Oriented Design</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Object-Oriented-Design/Software-Craftsmanship/">Software Craftsmanship</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Reactive/">Reactive</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Software-Architecture/">Software Architecture</a><span class="category-list-count">26</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Software-Architecture/Akka/">Akka</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Software-Architecture/Design-Patterns/">Design Patterns</a><span class="category-list-count">25</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Software-Architecture/Design-Patterns/Overview/">Overview</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Software-Architecture/Design-Patterns/Types/">Types</a><span class="category-list-count">24</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Software-Architecture/Design-Patterns/Types/Behavioral/">Behavioral</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Software-Architecture/Design-Patterns/Types/Creational/">Creational</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Software-Architecture/Design-Patterns/Types/Structural/">Structural</a><span class="category-list-count">7</span></li></ul></li></ul></li></ul></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">archives</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">July 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">April 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">March 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/02/">February 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/06/">June 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/04/">April 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/11/">November 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/09/">September 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/08/">August 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/07/">July 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/05/">May 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/03/">March 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/11/">November 2012</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/10/">October 2012</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/09/">September 2012</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/06/">June 2012</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/03/">March 2012</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/02/">February 2012</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/01/">January 2012</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/12/">December 2011</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/11/">November 2011</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/09/">September 2011</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/07/">July 2011</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/06/">June 2011</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/04/">April 2011</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/03/">March 2011</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/02/">February 2011</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/12/">December 2010</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/11/">November 2010</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/10/">October 2010</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/09/">September 2010</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/07/">July 2010</a><span class="archive-list-count">1</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">tags</h3>
        <div class="widget">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Actor-Model/">Actor Model</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Akka/">Akka</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Blogging/">Blogging</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Clean-Code/">Clean Code</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Design-for-Testability/">Design for Testability</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Design-Patterns/">Design-Patterns</a><span class="tag-list-count">25</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Dev-Tools/">Dev. Tools</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Distributed-Systems/">Distributed-Systems</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Event-Sourcing/">Event Sourcing</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/">Git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/">Hexo</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kafka/">Kafka</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Messaging/">Messaging</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Messaging-System/">Messaging System</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Naming-Practices/">Naming Practices</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Object-Oriented-Design/">Object-Oriented Design</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Observable/">Observable</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Reactive-Extensions/">Reactive Extensions</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Reactive-Programming/">Reactive Programming</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Refactoring/">Refactoring</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Replacing-Conditionals/">Replacing Conditionals</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RxJava/">RxJava</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Separation-of-Concerns/">Separation of Concerns</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Single-Responsibility/">Single Responsibility</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Software-Craftsmanship/">Software Craftsmanship</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/StaticWebsite/">StaticWebsite</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Subscriber/">Subscriber</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Subscription/">Subscription</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tutorials/">Tutorials</a><span class="tag-list-count">35</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Version-Control/">Version Control</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Zookeeper/">Zookeeper</a><span class="tag-list-count">1</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">tag cloud</h3>
        <div class="widget tagcloud">
            <a href="/tags/Actor-Model/" style="font-size: 10px;">Actor Model</a> <a href="/tags/Akka/" style="font-size: 10px;">Akka</a> <a href="/tags/Blogging/" style="font-size: 12.5px;">Blogging</a> <a href="/tags/Clean-Code/" style="font-size: 12.5px;">Clean Code</a> <a href="/tags/Design-for-Testability/" style="font-size: 10px;">Design for Testability</a> <a href="/tags/Design-Patterns/" style="font-size: 17.5px;">Design-Patterns</a> <a href="/tags/Dev-Tools/" style="font-size: 10px;">Dev. Tools</a> <a href="/tags/Distributed-Systems/" style="font-size: 10px;">Distributed-Systems</a> <a href="/tags/Event-Sourcing/" style="font-size: 10px;">Event Sourcing</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/Hexo/" style="font-size: 12.5px;">Hexo</a> <a href="/tags/Kafka/" style="font-size: 10px;">Kafka</a> <a href="/tags/Messaging/" style="font-size: 10px;">Messaging</a> <a href="/tags/Messaging-System/" style="font-size: 10px;">Messaging System</a> <a href="/tags/Naming-Practices/" style="font-size: 10px;">Naming Practices</a> <a href="/tags/Object-Oriented-Design/" style="font-size: 12.5px;">Object-Oriented Design</a> <a href="/tags/Observable/" style="font-size: 10px;">Observable</a> <a href="/tags/Reactive-Extensions/" style="font-size: 15px;">Reactive Extensions</a> <a href="/tags/Reactive-Programming/" style="font-size: 15px;">Reactive Programming</a> <a href="/tags/Refactoring/" style="font-size: 12.5px;">Refactoring</a> <a href="/tags/Replacing-Conditionals/" style="font-size: 10px;">Replacing Conditionals</a> <a href="/tags/RxJava/" style="font-size: 15px;">RxJava</a> <a href="/tags/Separation-of-Concerns/" style="font-size: 10px;">Separation of Concerns</a> <a href="/tags/Single-Responsibility/" style="font-size: 10px;">Single Responsibility</a> <a href="/tags/Software-Craftsmanship/" style="font-size: 10px;">Software Craftsmanship</a> <a href="/tags/StaticWebsite/" style="font-size: 12.5px;">StaticWebsite</a> <a href="/tags/Subscriber/" style="font-size: 10px;">Subscriber</a> <a href="/tags/Subscription/" style="font-size: 10px;">Subscription</a> <a href="/tags/Tutorials/" style="font-size: 20px;">Tutorials</a> <a href="/tags/Version-Control/" style="font-size: 10px;">Version Control</a> <a href="/tags/Zookeeper/" style="font-size: 10px;">Zookeeper</a>
        </div>
    </div>

    
        
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">links</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a href="http://hexo.io">Hexo</a>
                    </li>
                
            </ul>
        </div>
    </div>


    
    <div id="toTop" class="fa fa-angle-up"></div>
</aside>
            
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2017 Mahan Rad<br>
            Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="http://github.com/ppoffice">PPOffice</a>
        </div>
    </div>
</footer>
        
    
    <script>
    var disqus_config = function () {
        
            this.page.url = 'http://truelogician.com/2015/flatmap/';
        
        this.page.identifier = '2015/flatmap';
    };
    (function() { 
        var d = document, s = d.createElement('script');  
        s.src = '//' + 'mahansblog' + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>



    
        <script src="/vendor/lightgallery/js/lightgallery.min.js"></script>
        <script src="/vendor/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/vendor/lightgallery/js/lg-pager.min.js"></script>
        <script src="/vendor/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/vendor/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/vendor/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/vendor/lightgallery/js/lg-hash.min.js"></script>
        <script src="/vendor/lightgallery/js/lg-share.min.js"></script>
        <script src="/vendor/lightgallery/js/lg-video.min.js"></script>
    


<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>